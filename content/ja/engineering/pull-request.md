---
title: プルリクエスト
description: プルリクエストについて。
---

## プルリクエストの作成手順

1. mainブランチから作業ブランチを切ります。
1. ファイル修正をします。
1. 作業が終了したらコミット & プッシュします。
1. プルリクエストのタイトルにはprefixをつけ、わかりやすい文にします。
例: 「docs: チェックインについての記述を更新」
   - 参考：[Commit Message](/engineering/git)
1. Draft プルリクエストを作成して、コードの修正箇所を再度確認します。
1. 確認を終えたらOpenにしてレビュー依頼を行います。

## 証跡を残す

- 証跡として示すには検証環境であるか、本番環境であるか、ローカル環境での構築が適切に行われているかの確認が必要です。
- 適切なサイズ調整（例えば、`<img src="" width="50%">`を使用）やテーブルでの整理が必要です。また、英語が正しく反映されているか、画面回転やダークモード、端末サイズの違いによる影響も証跡として示すと良いでしょう。
- PRで変更した部分がわかるような証跡を残すことが重要です。

## コードの背景と理由をセルフレビューで明記する

コメントは、レビュワーがコードの意図を素早く理解し、効果的なフィードバックを提供するための基盤となります。

また、未来のメンテナンスを行う他の開発者にとっても、コードの理解を助け、意思決定の背景を明らかにするための貴重な情報源となります。

## 追加コミットを行ったら「プルリクエストの説明（コメント）」も更新する

追加コミット等で差分が変更された場合は、プルリクエストの説明も必ず更新しましょう。

特に、そのプルリクエストでやったことや、やらないことの説明は最新の状態に保ちましょう。
これにより、プロジェクトの進捗が最新化され、質疑の往復を防ぐことができます。

## 関連のIssueを閉じたい場合はプルリクエストでのみ `closes` キーワードを使用する

プルリクエストによりIssueの要件を満たし完了する場合にのみ `closes/fixes/resolves` 等のキーワードをIssue番号に添えましょう。

例： `closes #100`

参考ドキュメント：[キーワードを使用してPull RequestをIssueにリンクする｜GitHub](https://docs.github.com/ja/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword)

これにより、マージ時に関連するIssueが自動的にクローズされます。

不完全な解決や部分的な対応の場合は、このキーワードを避け、Issueを手動で管理することが推奨されます。

正確なキーワードの使用は、プロジェクトの整理と追跡を効率的に行うために重要です。

## 常にCIが通っているかを確認し、問題があればDraftにする

PRを提出したら、常にCIが通っているかを確認し、問題があればDraftの段階で解決するようにしましょう。

CIの成功は、コードの健全性と互換性を保証する重要なステップです。

問題を早期に発見し、修正することで、開発プロセスがスムーズに進行し、最終的な品質が向上します。

また、他のチームメンバーがレビューする前にすべてのテストがパスしていることを確認することで、レビューの効率も大幅に向上します。

## コンフリクト解消後にレビュー依頼を出す

コンフリクトがある場合は、これを解消してからレビュー依頼を出すようにしましょう。

コンフリクトを未解決のままレビュー依頼をすると、レビュワーが不必要な時間を費やすことになり、プロジェクトの進行に遅延をもたらす可能性があります。

手順は以下の通りです。

- ローカルのmainブランチを最新化します。

  1. `git switch main`
  1. `git pull origin main` or `git pull --rebase origin main`

- 作業ブランチにmainをマージします。

  1. `git switch 作業ブランチ名`
  1. `git merge main`
  1. コンフリクトが発生した場合、VS Code上で解消後、コミット&プッシュを行います。
      - 参考：[Git Conflict Resolution](https://qiita.com/crarrry/items/c5964512e21e383b73da)

## ブランチ名のページリンク

[ブランチ戦略](/engineering/branch-strategy.md)
